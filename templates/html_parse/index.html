{% extends 'base.html' %}


{% block style %}
    <link rel='stylesheet' href='//cdn.datatables.net/1.10.23/css/jquery.dataTables.min.css'>
{% endblock %}


{% block content %}
    <form method='POST' enctype='multipart/form-data' action="{% url 'url_parse' %}">
        <div class='card-header d-flex align-items-center justify-content-between'>
            <h5 class='my-2'>링크 삽입</h5>

            <div class='align-items-right my-2'>
                <div class='navbar-nav ml-auto'>
                    {% if not data %}

                        <button class='nav-item btn btn-primary' type='submit'>
                            <i class='fa fa-exchange'></i> 구문 분석
                        </button>

                    {% else %}

                        <button class='nav-item btn btn-primary' type='button' onclick='window.print();return false;'>
                            <i class='fa fa-download'></i> 파일 내보내기
                        </button>
                        <a class='nav-item btn btn-primary' href="{% url 'url_parse' %}">
                            <i class='fa fa-refresh'></i> 다시 시작
                        </a>

                    {% endif %}
                </div>
            </div>
        </div>

        <div class='card-body container'>
            {% csrf_token %}
            {% if not data %}

                <div class='row'>
                    <div class='col'>
                        <label>{{ form.link.label }}</label>
                        <div class="input-group">
                            {{ form.link }}
                            {{ form.html_file }}
                        </div>
                    </div>
                </div>

                <div class='row'>
                    <div class='col'>
                        <label>{{ form.value.label }}</label>
                        {{ form.value }}
                        <datalist id='value'>
                            <option value='cardListItem'>1688</option>
                            <option value='next-input-wrapper'>Shopify</option>
                        </datalist>
                    </div>
                </div>

                <div class='row mt-4'>
                    <div class='col-6'>
                        <label for='{{ form.username.id_for_label }}'>{{ form.username.label }}</label>
                        {{ form.username }}
                    </div>

                    <div class='col-6'>
                        <label for='{{ form.password.id_for_label }}'>{{ form.password.label }}</label>
                        {{ form.password }}
                    </div>
                </div>

            {% else %}

                <div class='row mt-4'>
                    <div class='col'>
                        {{ data | safe }}
                    </div>
                </div>

            {% endif %}
        </div>
    </form>
{% endblock %}


{% block script %}
    <script src='//cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js'></script>
    <script>
        $(document).ready(function () {
            $('.dataTable').DataTable();
        });
    </script>
{% endblock %}
