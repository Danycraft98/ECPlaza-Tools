{% extends 'base.html' %}


{% block style %}
    <link rel='stylesheet' href='//cdn.datatables.net/1.10.23/css/jquery.dataTables.min.css'>
{% endblock %}


{% block content %}
    <iframe id="galaxyIframe" name="galaxy" style="width: 1663px; height: 435px; top: 64px; left: 257px; display: block;" class="visible"
            src="https://analytics.google.com/analytics/web/#/report-home/a188561512w260691190p236543335/%3F_.useg=builtin2,builtin1"></iframe>
{% endblock %}`


{% block script %}
    <script src='//cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js'></script>
    <script src="https://apis.google.com/js/api.js"></script>
    <script crossorigin="anonymous">
        /*gtag('get', 'UA-188561512-1', 'client_id', function (token) {
            gapi.analytics.ready(function () {
                const xhttp = new XMLHttpRequest();
                xhttp.open('GET', 'https://analytics.google.com/analytics/web/#/report-home/a188561512w260691190p236543335/%3F_.useg=builtin2,builtin1');
                const headers = {
                    'Authorization': 'Basic ' + token, 'X-PINGOTHER': 'pingpong', 'X-Frame-Options': 'sameorigin', 'Content-Type': 'application/xml', 'entity': {"propertyId": "260668703"},
                    "dateRanges": [{"startDate": "2021-01-01", "endDate": "2020-02-22"}], "dimensions": [{"name": "country"}], "metrics": [{"name": "activeUsers"}]
                }
                for (let key in headers) {
                    xhttp.setRequestHeader(key, headers[key])
                }
                xhttp.onreadystatechange = function () {
                    if (this.readyState === 4 && this.status === 200) {
                        // Typical action to be performed when the document is ready:
                        console.log(this.responseURL)
                        $('#galaxyIframe').attr('src', this.responseURL); //URL.createObjectURL(this.response)
                    } else {
                        console.log('I am sorry.')
                    }
                };
                xhttp.send();
            });
        });*/

        const getMethods = (obj) => {
            let properties = new Set()
            let currentObj = obj
            do {
                Object.getOwnPropertyNames(currentObj).map(item => properties.add(item))
            } while ((currentObj = Object.getPrototypeOf(currentObj)))
            return [...properties.keys()].filter(item => typeof obj[item] === 'function')
        }
    </script>

{% endblock %}
