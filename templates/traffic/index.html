{% extends 'base.html' %}


{% block style %}
    <link rel='stylesheet' href='//cdn.datatables.net/1.10.23/css/jquery.dataTables.min.css'>
{% endblock %}


{% block content %}
    <div id="chart-1-container"></div>
    <div id="chart-2-container"></div>
    <iframe id="galaxyIframe" name="galaxy" style="width: 1663px; height: 435px; top: 64px; left: 257px; display: block;" class="visible"></iframe>
{% endblock %}


{% block script %}
    <script src='//cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js'></script>
    <script src="https://apis.google.com/js/api.js"></script>
    <script>
        const xhttp = new XMLHttpRequest();
        xhttp.open('GET', 'https://analytics.google.com/analytics/app/#dashboard/pDvQqkxrSDyFCPFpo-ifgg/a188561512w260691190p236543335/%3F_.useg%3Dbuiltin2%2Cbuiltin1/');
        xhttp.setRequestHeader("Authorization", "Basic " + btoa('lee.daniel.jhl@gmail.com:Gr33n-Google1!'))
        xhttp.setRequestHeader('X-PINGOTHER', 'pingpong');
        xhttp.setRequestHeader('Content-Type', 'application/xml');
        console.log(xhttp)
        xhttp.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200) {
                // Typical action to be performed when the document is ready:
                document.querySelector('#galaxyIframe').src = URL.createObjectURL(this.response);
            } else {
                document.querySelector('#galaxyIframe').src = 'https://google.ca';
                console.log('I am sorry.')
            }
        };
        xhttp.send();

        /*gapi.analytics.ready(function () {
            /*gapi.analytics.auth.authorize({
                container: 'auth-button',
                clientid: CLIENT_ID,
            });
            gapi.analytics.auth.authorize({
                'serverAuth': {
                    'access_token': '{ { google_access_token }}'
                }
            });

            const dataChart1 = new gapi.analytics.googleCharts.DataChart({
                query: {
                    'ids': '{ { google_userid }}',
                    'start-date': '30daysAgo',
                    'end-date': 'today',
                    'metrics': 'ga:sessions',
                    'dimensions': 'ga:date',
                    'sort': '-ga:date'
                },
                chart: {
                    'container': 'chart-1-container',
                    'type': 'LINE',
                    'options': {
                        'width': '100%'
                    }
                }
            });
            dataChart1.execute();
        });*/
    </script>

{% endblock %}
